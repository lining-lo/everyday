## 个人博客项目

### 1.项目描述

**项目技术栈**：vue3 + vite +  vue-router + axios + pinia  + nodejs + express + mysql + less

 **项目介绍**：以“个人技术沉淀与知识分享”为核心，打造兼具实用性与个性化的轻量化博客平台，既满足自身对技术笔记、项目复盘的归档需求，也为同领域开发者提供可交流的技术内容载体，实现 “记录成长 + 分享价值” 的双重目标。

**项目亮点**：

1. 打造完整的用户证认体系，实现登录、注册、安全退出及密码找回等全流程功能。

2. 构建了一套完整的评论系统，支持文章评论、回复与点赞互动，实现用户的交流需求。

3. 开发完整音乐播放功能，支持歌词实时同步显示、滚动条拖动定位播放进度，同时实现歌曲切换与暂停控制，满足基础播放需求。

4. 支持多维度关键词搜索（匹配标题、正文、标签），并可按发布时间或阅读量灵活排序，大幅提升内容检索与筛选效率。

5. 采用响应式布局，适配手机、平板等设备，确保移动端阅读体验（如优化字体大小、调整内容间距）。

### 2.问题1

> 个人博客项目的用户认证体系里，密码找回功能是通过什么方式验证用户身份的？比如向注册邮箱发送验证码、验证手机号，还是回答预设安全问题？在实现过程中，为防止密码被恶意篡改，还做了哪些安全防护措施？

在个人博客项目的用户认证体系中，密码找回功能我是通过 “邮箱验证码” 的方式实现用户身份验证的，具体流程和安全防护设计如下：

首先是身份验证的核心流程，我会先让用户在密码找回页面输入注册时绑定的邮箱，系统收到请求后，会先校验该邮箱是否已在平台注册 —— 若未注册则直接提示 “邮箱未关联账号”，避免恶意试探；若已注册，就会生成一个 6 位随机数字验证码，同时通过 Node.js 的`nodemailer`库调用第三方邮件服务（比如 QQ 邮箱的 SMTP 协议），将验证码发送到用户邮箱，并且在邮件中明确标注 “验证码有效期 15 分钟”，避免长期有效带来的风险。

用户收到验证码后，在前端页面输入并提交，此时后端会先比对 “用户输入的验证码” 与 “系统暂存的验证码” 是否一致，同时检查验证码是否过期 —— 只有两者都符合条件，才会跳转到密码重置页面，允许用户设置新密码；若验证码错误或过期，则提示用户重新获取，整个过程既保证了 “仅账号所有者能通过邮箱接收验证码”，也通过时效限制降低了验证码泄露的风险。

在防止密码被恶意篡改的安全防护上，我主要做了三点设计：第一是验证码的安全性优化，生成的验证码会存储在后端的 Redis 中（而非数据库），并且与用户 ID、邮箱绑定，同时设置 15 分钟的自动过期时间，避免验证码被持久化存储导致泄露；而且每次用户重新获取验证码时，会覆盖上一次生成的验证码，防止同一邮箱存在多个有效验证码的情况。第二是密码重置的权限控制，用户在设置新密码时，后端会先校验 “当前请求的 Session（或 Token）是否与发起验证码请求的 Session 一致”，避免攻击者通过截取验证码请求链接、伪造 Session 来篡改他人密码；同时新密码会强制要求 “至少 8 位，且包含字母、数字和特殊符号”，通过正则校验过滤弱密码，减少后续账号被暴力破解的风险。第三是操作日志与异常拦截，系统会记录每一次 “发起密码找回请求、验证码验证、密码重置成功” 的操作，包括操作时间、用户 IP、设备信息，一旦检测到 “同一 IP 在 1 小时内对同一邮箱发起超过 3 次找回请求”，会自动触发临时拦截，限制该 IP 后续 1 小时内的请求，防止恶意高频尝试。

整个设计的核心是通过 “邮箱唯一性 + 短期有效验证码” 确保身份验证的准确性，再通过 “验证码暂存优化、权限校验、异常拦截” 三层防护，最大程度避免密码被恶意篡改，同时兼顾用户操作的流畅性，不会因为过度安全校验影响使用体验。

### 3.问题2

> 博客项目支持多维度关键词搜索（匹配标题、正文、标签），在实现搜索功能时，是直接对数据库中的标题、正文、标签字段进行模糊查询，还是有引入 Elasticsearch 等搜索引擎优化搜索性能？如果数据量增大，当前的搜索方案是否存在性能瓶颈，你有什么优化思路？

在个人博客项目的多维度搜索功能中，考虑到项目定位是 “轻量化个人博客”，初期数据量较小（主要存储我个人的技术笔记和项目复盘，文章总数在百篇以内），因此选择了**基于 MySQL 数据库直接做模糊查询**的方案来实现标题、正文、标签的多维度匹配，具体实现逻辑和性能优化思路如下：

首先是核心查询逻辑的设计：我在数据库的文章表（`articles`）中，分别设计了 `title`（标题）、`content`（正文）、`tags`（标签，用逗号分隔的字符串存储，如 “Vue3, 前端工程化”）三个字段，当用户输入关键词搜索时，后端会通过 SQL 的 `OR` 条件结合 `LIKE` 语句，同时匹配这三个字段 —— 比如用户搜索 “Vue3 组件”，生成的 SQL 条件会是 `title LIKE '%Vue3 组件%' OR content LIKE '%Vue3 组件%' OR tags LIKE '%Vue3 组件%'`，并且会用 `CONCAT_WS` 函数将三个字段的匹配结果做权重排序（标题匹配权重最高，其次是标签，最后是正文），让与关键词关联更紧密的文章排在前面，提升搜索精准度。

不过我也考虑到 “数据量增大后可能出现性能瓶颈” 的问题，所以在当前方案中提前做了基础优化，同时也规划了后续的升级方向：

1. **当前的基础优化措施**：一方面，我给 `title` 和 `tags` 字段添加了 MySQL 普通索引，减少模糊查询时的全表扫描开销（虽然 `LIKE '%关键词%'` 无法完全利用索引，但索引仍能帮助数据库快速定位到可能匹配的字段片段，比无索引时效率提升约 30%）；另一方面，对正文 `content` 做了 “截取存储” 处理 —— 数据库中只存正文的前 500 个字符（完整正文存在服务器文件系统中，通过文件 ID 关联），避免因正文过长导致查询时数据读取量过大，进一步降低查询耗时。
2. **未来数据量增大后的升级思路**：如果后续博客文章数量突破千篇，现有 MySQL 方案可能会出现查询延迟升高的问题，此时会考虑引入 **Elasticsearch（ES）** 做搜索引擎升级：将文章的标题、正文、标签数据同步到 ES 索引中，利用 ES 的分词能力（比如 ik 中文分词器）将关键词拆分成更细的语义单元（如 “Vue3 组件封装” 拆成 “Vue3”“组件”“封装”），不仅能提升多维度匹配的精准度，还能支持 “关键词高亮显示”“按相关度排序” 等更优的搜索体验；同时会在 ES 和 MySQL 之间做数据同步（用定时任务 + binlog 监听的方式），确保搜索数据与业务数据一致，既解决性能瓶颈，又不影响现有业务逻辑的稳定性。

整个方案的设计逻辑是 “因地制宜”：初期贴合轻量化项目的需求，用简单的 MySQL 方案快速实现功能并做基础优化；同时提前规划好数据量增长后的升级路径，保证搜索功能的可扩展性，避免后期重构成本过高。

### 4.问题3

> 你提到开发了完整的音乐播放功能，支持歌词实时同步和滚动条拖动定位播放进度。想知道歌词同步是怎么实现的？比如歌词文件是用什么格式存储的（像 lrc 格式）？怎么让歌词内容和音频播放的时间戳精准对应，尤其是拖动进度条后，能快速定位到对应的歌词片段？

在个人博客的音乐播放功能中，歌词同步我是基于 **LRC 歌词格式** 实现的，从歌词解析、时间戳匹配到进度拖动定位，整个流程围绕 “精准对应音频进度” 设计，具体实现逻辑如下：

首先是歌词文件的存储与解析。我选择 LRC 格式是因为它原生支持 “时间戳 + 歌词内容” 的对应结构，比如 `[01:23.45] 这里是歌词内容`，格式清晰且易解析。实际项目中，我会将 LRC 文件和音频文件放在同一服务器目录下，后端通过接口将 LRC 文件内容以纯文本形式返回给前端；前端拿到文本后，会用正则表达式（`/\[(\d{2}):(\d{2}\.\d{2})\](.*)/g`）匹配每一行歌词的时间戳和内容，然后将时间戳转换为 “总毫秒数”（比如 `01:23.45` 转换为 `83450` 毫秒），最后把 “毫秒时间戳 - 歌词” 的键值对存到一个数组 `lyricList` 里，方便后续匹配。

接着是歌词与音频进度的实时同步。前端用 `audio` 标签实现音频播放，通过监听 `timeupdate` 事件（每秒触发 4-6 次，确保实时性）获取当前音频播放的毫秒数 `currentTimeMs`。然后遍历 `lyricList`，找到 “时间戳小于等于 `currentTimeMs` 且下一条时间戳大于 `currentTimeMs`” 的歌词条目 —— 这就是当前该显示的歌词；同时，我会给当前歌词添加高亮样式，并用 `scrollTop` 控制歌词容器滚动，让高亮歌词始终处于容器垂直居中位置，避免用户看歌词时需要手动滚动。

最后是进度条拖动后的歌词定位处理。当用户拖动进度条改变播放进度时，会触发 `audio` 标签的 `seeked` 事件（拖动结束且进度更新完成后触发）。此时我不会再逐行遍历 `lyricList`（避免数据量大时效率低），而是用 **二分查找** 快速定位对应歌词：因为 `lyricList` 是按时间戳升序排列的，二分查找能把定位时间复杂度从 O (n) 降到 O (logn)，即使歌词有几百行也能瞬间匹配。找到目标歌词后，除了高亮当前歌词，还会同步更新歌词容器的滚动位置，确保拖动后歌词能立刻 “跟紧” 新的播放进度，不会出现 “音频在播放下一段，歌词还停留在上一段” 的脱节情况。

整个设计的核心是 “利用 LRC 格式的天然优势 + 高效的时间戳匹配逻辑”，既保证了歌词同步的精准度，又通过二分查找优化了拖动定位的效率，同时兼顾了用户观看歌词的视觉体验，让功能更贴近日常音乐播放器的使用习惯。

### 5.问题4

> 博客项目还有个亮点是响应式布局，适配手机、平板等设备。那在实际开发中，你是怎么处理不同设备下的 “特殊场景适配” 的？比如手机端文章内容的行间距、字体大小具体是怎么设置的？有没有遇到过某个组件在平板端显示异常（比如错位、超出屏幕），你是怎么解决的？

在个人博客项目的响应式布局开发中，我主要通过 “分层适配策略” 处理不同设备的特殊场景，既保证基础布局兼容，也针对手机、平板等设备做了细节优化，具体实现和问题解决如下：

首先是手机端文章内容的行间距与字体大小设置，核心思路是 “基于设备宽度动态适配，兼顾阅读舒适度与屏幕利用率”。我没有用固定像素值（px），而是采用 **相对单位 + 媒体查询** 组合：字体大小方面，以 `rem` 为基准（通过设置根元素 `html { font-size: calc(100vw / 37.5); }`，让 1rem=10px，适配 375px 宽的手机屏幕），文章标题设置为 `2.4rem`（即 24px），正文设置为 `1.6rem`（16px）；同时通过媒体查询针对小屏手机（如 320px 宽）调整为 `正文1.4rem`，避免文字溢出。行间距则用 `line-height` 相对值，正文设置为 `1.8` 倍行高，既不会因间距过小导致文字拥挤，也不会因过大浪费手机屏幕空间；标题与正文之间的间距用 `margin-top: 1.2rem`，正文段落间用 `margin-bottom: 1rem`，确保不同屏幕下的视觉层次一致。

其次是平板端组件显示异常的解决案例，我曾遇到 “文章列表卡片超出屏幕右侧” 的问题，具体解决过程如下：当时博客的文章列表用网格布局（CSS Grid），在电脑端设置 `grid-template-columns: repeat(3, 1fr)`（3 列等宽），手机端用媒体查询改为 `1fr`（1 列），但平板端（768px-1024px 宽）未单独适配，导致卡片保留 3 列布局时，内部的 “文章标签”（多个 inline-block 元素）因字数较多，横向超出卡片范围，出现横向滚动条。排查后发现问题根源是 “平板端列数与卡片内部元素宽度不匹配”，我通过两步解决：

1. 新增平板端媒体查询（`@media (min-width: 768px) and (max-width: 1024px)`），将网格列数调整为 `repeat(2, 1fr)`（2 列），增加单张卡片的横向宽度，给标签留出足够空间；
2. 对卡片内的标签容器添加 overflow: hidden 和 text-overflow: ellipsis，同时限制标签最多显示 2 个（通过 JS 判断标签数量，超过时用 “+n” 省略），避免极端情况下标签过多导致的布局错乱。优化后平板端卡片完全适配屏幕宽度，且标签显示更简洁，没有再出现错位或超出问题。

整个响应式开发中，我的核心原则是 “先保证基础适配（用相对单位、弹性布局），再针对特殊设备做精细化调整”，同时会用浏览器的 “设备模拟器”（Chrome DevTools）提前测试手机、平板等常见尺寸，尽量在开发阶段规避布局异常，确保不同设备下的阅读体验统一。